var AT={JET_LAG:200,cookie_domain:null,cookie_duration:30,check_scope:function(){var e=this.get_utm_source()||this.get_param("utm_source");return"accesstrade"==e?!0:!1},init:function(e){this.cookie_domain=e.cookie_domain||null,this.cookie_duration=e.cookie_duration||30},track:function(){var e=this.get_param("aff_sid"),o=this.get_param("utm_source");"accesstrade"==o&&(this.set_cookie("_aff_network","accesstrade",this.cookie_duration),e&&this.set_cookie("_aff_sid",e,this.cookie_duration)),this.check_scope()&&setTimeout(function(){AT.track_conversion()},AT.JET_LAG)},track_conversion:function(){var e=this.get_session_id();if(void 0===e||null==e||""===e.trim())return console.log("[AT] There is no session id found"),!1;if("undefined"==typeof at_order_info)return!1;console.log("[AT] Tracking conversion...");for(var o=JSON.stringify(accesstrade_order_info),t=[],i=JSON.parse(o),n=Object.keys(i),r=0;r<n.length;r++)if("products"===n[r])for(var c=i[n[r]],s=0;s<c.length;s++){var a=c[s],u=a.id+"."+a.quantity+"."+a.price;delete a.id,delete a.quantity,delete a.price;for(var d=0;d<Object.keys(a).length;d++){var _=Object.keys(a)[d];u+="."+_+":"+a[_]}t.push("goods="+encodeURIComponent(u))}else t.push(n[r]+"="+encodeURIComponent(i[n[r]]));t.push("time="+String((new Date).getTime()));var f=document.createElement("img");f.width=1,f.height=1,f.border=0,f.src="https://cv.accesstrade.vn/cv.php?"+t.join("&"),console.log("[AT] Pixel tracking url: "+f.src),document.body.appendChild(f)},get_param:function(e,o){o||(o=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(o);return null==n?null:n[1]},set_cookie:function(e,o,t){var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3);var n="expires="+i.toUTCString();cookie_domain=this.cookie_domain||window.location.hostname,document.cookie=e+"="+o+"; "+n+";domain="+cookie_domain+"; path=/"},get_cookie:function(e){for(var o=e+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var n=t[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(o))return n.substring(o.length,n.length)}return void 0},get_session_id:function(){return this.get_cookie("_aff_sid")||""},get_utm_source:function(){return this.get_cookie("_aff_network")||""}};